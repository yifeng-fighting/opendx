(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3500f5d8"],{"45a2":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return l})),a.d(t,"b",(function(){return o})),a.d(t,"e",(function(){return s}));var n=a("b775");function i(e){return Object(n["a"])({method:"post",url:"/page/add",data:e})}function r(e){return Object(n["a"])({method:"get",url:"/page/".concat(e)})}function l(e){return Object(n["a"])({method:"post",url:"/page/list",params:e})}function o(e){return Object(n["a"])({method:"delete",url:"/page/".concat(e)})}function s(e){return Object(n["a"])({method:"post",url:"/page/update",data:e})}},4668:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-header",{attrs:{height:"50px"}},[a("el-popover",{attrs:{placement:"right",trigger:"click"}},[a("device-inspector",{staticStyle:{width:"1200px",height:"650px"},attrs:{"canvas-id":"page-canvas","page-type":e.savePageForm.type,"window-info":e.windowInfo,"window-hierarchy":e.savePageForm.windowHierarchy,"tree-loading":!1}}),e._v(" "),a("el-button",{attrs:{slot:"reference",icon:"el-icon-search"},slot:"reference"},[e._v(e._s(e.pageType+" - Inspector"))])],1),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"选择分类"},on:{"visible-change":e.pageCategorySelectChange},model:{value:e.savePageForm.categoryId,callback:function(t){e.$set(e.savePageForm,"categoryId",t)},expression:"savePageForm.categoryId"}},e._l(e.pageCategoryList,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1),e._v(" "),a("span",{staticClass:"required"}),a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"page名"},model:{value:e.savePageForm.name,callback:function(t){e.$set(e.savePageForm,"name",t)},expression:"savePageForm.name"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.savePage}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:e.addAction}},[e._v("添加Action")]),e._v(" "),a("el-button",{on:{click:e.showPageAction}},[e._v("查看Action")])],1),e._v(" "),a("page-action-drawer",{attrs:{"page-id":e.savePageForm.id,visible:e.showPageActionDrawer},on:{"update:visible":function(t){e.showPageActionDrawer=t}}}),e._v(" "),a("el-main",[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:1},clearable:""},model:{value:e.savePageForm.description,callback:function(t){e.$set(e.savePageForm,"description",t)},expression:"savePageForm.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"元素"}},[a("el-table",{attrs:{data:e.savePageForm.elements,border:""}},[a("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-input",{attrs:{clearable:""},model:{value:n.name,callback:function(t){e.$set(n,"name","string"===typeof t?t.trim():t)},expression:"row.name"}})]}}])},[a("template",{slot:"header"},[a("el-button",{staticClass:"el-icon-circle-plus",attrs:{type:"text"},on:{click:function(t){return e.addElement(e.savePageForm.elements.length)}}}),e._v("\n              WebElement\n            ")],1)],2),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"定位方式"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.findBys,filterable:"",props:{expandTrigger:"hover"}},model:{value:n.findBy,callback:function(t){e.$set(n,"findBy",t)},expression:"row.findBy"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("image-input",{model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"row.value"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-input",{attrs:{type:"textarea",autosize:{minRows:1}},model:{value:n.description,callback:function(t){e.$set(n,"description",t)},expression:"row.description"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.savePageForm.name+"_"+t.row.name,expression:"`${savePageForm.name}_${scope.row.name}`",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],attrs:{size:"mini"}},[e._v("引用")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.addElement(t.$index)}}},[e._v("+")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.delElement(t.$index)}}},[e._v("-")])],1)]}}])})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"By"}},[a("el-table",{attrs:{data:e.savePageForm.bys,border:""}},[a("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-input",{attrs:{clearable:""},model:{value:n.name,callback:function(t){e.$set(n,"name","string"===typeof t?t.trim():t)},expression:"row.name"}})]}}])},[a("template",{slot:"header"},[a("el-button",{staticClass:"el-icon-circle-plus",attrs:{type:"text"},on:{click:function(t){return e.addBy(e.savePageForm.bys.length)}}}),e._v("\n              By\n            ")],1)],2),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"定位方式"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.bys,filterable:"",props:{expandTrigger:"hover"}},model:{value:n.findBy,callback:function(t){e.$set(n,"findBy",t)},expression:"row.findBy"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("image-input",{model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"row.value"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-input",{attrs:{type:"textarea",autosize:{minRows:1}},model:{value:n.description,callback:function(t){e.$set(n,"description",t)},expression:"row.description"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.savePageForm.name+"_"+t.row.name,expression:"`${savePageForm.name}_${scope.row.name}`",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],attrs:{size:"mini"}},[e._v("引用")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.addBy(t.$index)}}},[e._v("+")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.delBy(t.$index)}}},[e._v("-")])],1)]}}])})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"deviceId"}},[a("el-input",{attrs:{clearable:""},model:{value:e.savePageForm.deviceId,callback:function(t){e.$set(e.savePageForm,"deviceId",t)},expression:"savePageForm.deviceId"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"图片Path"}},[a("el-input",{attrs:{clearable:""},model:{value:e.savePageForm.imgPath,callback:function(t){e.$set(e.savePageForm,"imgPath",t)},expression:"savePageForm.imgPath"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"布局"}},[a("el-input",{attrs:{clearable:""},model:{value:e.savePageForm.windowHierarchy,callback:function(t){e.$set(e.savePageForm,"windowHierarchy",t)},expression:"savePageForm.windowHierarchy"}})],1)],1)],1)],1),e._v(" "),"Web"!==e.pageType?a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"window宽"}},[a("el-input",{attrs:{clearable:""},model:{value:e.savePageForm.windowWidth,callback:function(t){e.$set(e.savePageForm,"windowWidth",t)},expression:"savePageForm.windowWidth"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"window高"}},[a("el-input",{attrs:{clearable:""},model:{value:e.savePageForm.windowHeight,callback:function(t){e.$set(e.savePageForm,"windowHeight",t)},expression:"savePageForm.windowHeight"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"window方向"}},[a("el-input",{attrs:{clearable:""},model:{value:e.savePageForm.windowOrientation,callback:function(t){e.$set(e.savePageForm,"windowOrientation",t)},expression:"savePageForm.windowOrientation"}})],1)],1)],1)],1):e._e()],1)],1)},i=[],r=a("45a2"),l=a("c405"),o=a("b910"),s=a("8325"),c=a("ab2e"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",{attrs:{visible:e.drawerVisible,direction:"rtl","with-header":!1,size:"60%"},on:{"update:visible":function(t){e.drawerVisible=t},open:e.onOpen}},[a("el-table",{attrs:{data:e.actions,"highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{label:"Action",align:"center",prop:"name","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"描述",align:"center",prop:"description","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{staticClass:"el-icon-document-copy",attrs:{size:"mini",type:"success"},on:{click:function(t){return e.copyAction(n)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.updateAction(n.id)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deleteAction(n)}}})]}}])})],1)],1)},d=[],p=(a("7f7f"),a("c5f6"),a("8121")),m={props:{visible:Boolean,pageId:Number},watch:{visible:function(e){this.drawerVisible=e},drawerVisible:function(e){this.$emit("update:visible",e)}},data:function(){return{drawerVisible:!1,actions:[]}},methods:{onOpen:function(){this.fetchActionList()},fetchActionList:function(){var e=this;Object(p["e"])({pageId:this.pageId}).then((function(t){e.actions=t.data}))},copyAction:function(e){this.drawerVisible=!1;var t=JSON.parse(JSON.stringify(e));delete t.id,delete t.createTime,delete t.creatorUid,delete t.creatorNickName,delete t.updateTime,delete t.updatorUid,delete t.updatorNickName,this.$router.push({name:"AddEncapsulationAction",params:t})},updateAction:function(e){this.drawerVisible=!1,this.$router.push({name:"UpdateEncapsulationAction",params:{actionId:e}})},deleteAction:function(e){var t=this;this.$confirm("删除".concat(e.name),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(p["c"])(e.id).then((function(e){t.$notify.success(e.msg),t.fetchActionList()}))}))}}},v=m,b=a("2877"),f=Object(b["a"])(v,u,d,!1,null,null,null),g=f.exports,h={directives:{clipboard:s["a"]},props:{isAdd:Boolean},components:{DeviceInspector:o["a"],ImageInput:c["a"],PageActionDrawer:g},data:function(){return{showPageActionDrawer:!1,savePageForm:{id:void 0,name:"",projectId:this.$store.state.project.id,type:void 0,categoryId:void 0,description:"",imgPath:"",imgUrl:"",windowHeight:void 0,windowWidth:void 0,windowOrientation:void 0,deviceId:void 0,windowHierarchy:"",elements:[],bys:[]},pageCategoryList:[],added:!1}},computed:{windowInfo:function(){return{windowWidth:this.savePageForm.windowWidth,windowHeight:this.savePageForm.windowHeight,windowOrientation:this.savePageForm.windowOrientation,imgUrl:this.savePageForm.imgUrl}},pageType:function(){var e=this.savePageForm.type;return 1===e?"Android Native":2===e?"iOS Native":"Web"},findBys:function(){var e=[{value:"@AndroidFindBy",label:"AndroidFindBy",children:[{value:"uiAutomator",label:"uiAutomator"},{value:"accessibility",label:"accessibility"},{value:"id",label:"id"},{value:"xpath",label:"xpath"}]},{value:"@iOSXCUITFindBy",label:"iOSFindBy",children:[{value:"iOSClassChain",label:"iOSClassChain"},{value:"iOSNsPredicate",label:"iOSNsPredicate"},{value:"accessibility",label:"accessibility"},{value:"id",label:"id"},{value:"xpath",label:"xpath"}]},{value:"@FindBy",label:"FindBy",children:[{value:"id",label:"id"},{value:"name",label:"name"},{value:"className",label:"className"},{value:"css",label:"css"},{value:"tagName",label:"tagName"},{value:"linkText",label:"linkText"},{value:"partialLinkText",label:"partialLinkText"},{value:"xpath",label:"xpath"}]}],t=this.savePageForm.type;return 1===t?e.splice(1,1):2===t?e.splice(0,1):e.splice(0,2),e},bys:function(){var e=[{value:"MobileBy",label:"MobileBy",children:[{value:"id",label:"id"},{value:"AccessibilityId",label:"AccessibilityId"},{value:"xpath",label:"xpath"},{value:"AndroidUIAutomator",label:"AndroidUIAutomator"},{value:"iOSClassChain",label:"iOSClassChain"},{value:"iOSNsPredicateString",label:"iOSNsPredicateString"},{value:"image",label:"image"},{value:"className",label:"className"},{value:"name",label:"name"},{value:"cssSelector",label:"cssSelector"},{value:"linkText",label:"linkText"},{value:"partialLinkText",label:"partialLinkText"},{value:"tagName",label:"tagName"}]},{value:"By",label:"By",children:[{value:"id",label:"id"},{value:"name",label:"name"},{value:"className",label:"className"},{value:"css",label:"css"},{value:"tagName",label:"tagName"},{value:"linkText",label:"linkText"},{value:"partialLinkText",label:"partialLinkText"},{value:"xpath",label:"xpath"}]}],t=this.savePageForm.type;return 3===t?e.splice(0,1):e.splice(1,1),e}},created:function(){var e=this;this.fetchPageCategoryList(),this.isAdd?this.$nextTick((function(){e.savePageForm=e.$route.params})):Object(r["c"])(this.$route.params.pageId).then((function(t){e.savePageForm=t.data}))},methods:{onCopySuccess:function(e){this.$notify.success("引用已添加到剪切板")},savePage:function(){var e=this;this.isAdd&&!this.added?Object(r["a"])(this.savePageForm).then((function(t){e.$notify.success(t.msg),e.savePageForm=t.data,e.added=!0})):Object(r["e"])(this.savePageForm).then((function(t){e.$notify.success(t.msg)}))},pageCategorySelectChange:function(e){e&&this.fetchPageCategoryList()},fetchPageCategoryList:function(){var e=this;Object(l["c"])({projectId:this.$store.state.project.id,type:1}).then((function(t){e.pageCategoryList=t.data}))},addElement:function(e){this.savePageForm.elements.splice(e+1,0,{name:"",findBy:[],value:""})},addBy:function(e){this.savePageForm.bys.splice(e+1,0,{name:"",findBy:[],value:""})},delElement:function(e){this.savePageForm.elements.splice(e,1)},delBy:function(e){this.savePageForm.bys.splice(e,1)},addAction:function(){this.savePageForm.id?this.$router.push({name:"AddEncapsulationAction",params:{pageId:this.savePageForm.id}}):this.$notify.error("page未保存，无法添加")},showPageAction:function(){this.savePageForm.id?this.showPageActionDrawer=!0:this.$notify.error("page未保存，无法查看")}}},w=h,y=Object(b["a"])(w,n,i,!1,null,null,null);t["a"]=y.exports},8121:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"f",(function(){return r})),a.d(t,"e",(function(){return l})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return s})),a.d(t,"b",(function(){return c}));var n=a("b775");function i(e){return Object(n["a"])({method:"post",url:"/action/add",data:e})}function r(e){return Object(n["a"])({method:"post",url:"/action/update",data:e})}function l(e){return Object(n["a"])({method:"post",url:"/action/list",params:e})}function o(e){return Object(n["a"])({method:"delete",url:"/action/".concat(e)})}function s(e,t,a){return Object(n["a"])({method:"get",url:"/action/cascader",params:{projectId:e,platform:t,type:a}})}function c(e){return Object(n["a"])({method:"post",url:"/action/debug",data:e})}},ab2e:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e.isBase64Png?a("el-image",{staticStyle:{width:"100px"},attrs:{src:e.src,"preview-src-list":[e.src]}}):e._e(),e._v(" "),e.isBase64Png?a("el-input",{staticStyle:{width:"100px"},attrs:{clearable:""},nativeOn:{paste:function(t){return e.onpaste(t)}},model:{value:e.currentValue,callback:function(t){e.currentValue="string"===typeof t?t.trim():t},expression:"currentValue"}}):e._e(),e._v(" "),e.isBase64Png?e._e():a("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:10}},nativeOn:{paste:function(t){return e.onpaste(t)}},model:{value:e.currentValue,callback:function(t){e.currentValue="string"===typeof t?t.trim():t},expression:"currentValue"}})],1)},i=[],r=(a("4917"),a("f559"),a("c5f6"),{name:"ImageInput",props:{value:[String,Number]},data:function(){return{base64PngSrcPrefix:"data:image/png;base64,",base64PngPrefix:"iVBORw0KGgoAAAANSUhEUgAA",currentValue:this.value}},computed:{isBase64Png:function(){return!!this.currentValue&&this.currentValue.startsWith(this.base64PngPrefix)},src:function(){return this.base64PngSrcPrefix+this.currentValue}},watch:{value:function(e){this.currentValue=e},currentValue:function(e){this.$emit("input",e)}},methods:{onpaste:function(e){var t=this;if(e.clipboardData&&e.clipboardData.items){var a=e.clipboardData.items[0];if(a&&"file"===a.kind&&a.type.match(/^image\//i)){console.log("paste img to base64");var n=a.getAsFile(),i=new FileReader;i.onload=function(e){t.currentValue=e.target.result.substring(22)},i.readAsDataURL(n)}}}}}),l=r,o=a("2877"),s=Object(o["a"])(l,n,i,!1,null,null,null);t["a"]=s.exports},c405:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r})),a.d(t,"e",(function(){return l})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return s}));var n=a("b775");function i(e){return Object(n["a"])({method:"post",url:"/category/add",data:e})}function r(e,t,a){return Object(n["a"])({method:"delete",url:"/category/".concat(e,"/type/").concat(t,"/project/").concat(a)})}function l(e){return Object(n["a"])({method:"post",url:"/category/update",data:e})}function o(e){return Object(n["a"])({method:"post",url:"/category/list",params:e})}function s(e,t){return Object(n["a"])({method:"get",url:"/category/tree",params:{projectId:e,type:t}})}},f559:function(e,t,a){"use strict";var n=a("5ca1"),i=a("9def"),r=a("d2c8"),l="startsWith",o=""[l];n(n.P+n.F*a("5147")(l),"String",{startsWith:function(e){var t=r(this,e,l),a=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return o?o.call(t,n,a):t.slice(a,a+n.length)===n}})}}]);