(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26f640b4"],{"074e":function(t,e,a){},"2f21":function(t,e,a){"use strict";var l=a("79e5");t.exports=function(t,e){return!!t&&l((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"527e":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"20px","font-size":"30px"}},[a("el-card",[a("span",{staticStyle:{"font-weight":"900"},attrs:{slot:"header"},slot:"header"},[t._v("\n      概况\n    ")]),t._v(" "),a("el-table",{attrs:{data:t.testTaskSummary,border:""}},[a("el-table-column",{attrs:{label:"平台",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n          "+t._s(t.platforms.filter((function(t){return t.type===a.platform}))[0].name)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"项目",prop:"projectName",align:"center","min-width":"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"环境",prop:"environmentName",align:"center","min-width":"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"测试计划",align:"center","min-width":"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n          "+t._s(a.testPlan.name)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"提交人",prop:"commitorNickName",align:"center","min-width":"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"提交时间",prop:"commitTime",align:"center",width:"150","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"完成时间",prop:"finishTime",align:"center",width:"150","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"通过",prop:"passCaseCount",align:"center",width:"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"失败",prop:"failCaseCount",align:"center",width:"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"跳过",prop:"skipCaseCount",align:"center",width:"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"通过率",prop:"passPercent",align:"center",width:"100","show-overflow-tooltip":""}})],1),t._v(" "),a("el-divider"),t._v(" "),a("el-table",{attrs:{data:t.deviceTestTaskSummary,border:""}},[t.isWeb?a("el-table-column",{attrs:{prop:"platform",label:"操作系统",align:"center","show-overflow-tooltip":"",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n          "+t._s(1===a.platform?"windows":2===a.platform?"linux":"macos")+"\n        ")]}}],null,!1,1824634930)}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"deviceId",prop:"deviceId",align:"center","show-overflow-tooltip":""}}),t._v(" "),t.isWeb?a("el-table-column",{attrs:{label:"类型",prop:"type",align:"center","show-overflow-tooltip":"",sortable:""}}):t._e(),t._v(" "),t.isWeb?a("el-table-column",{attrs:{label:"版本号",prop:"version",align:"center","show-overflow-tooltip":"",sortable:""}}):t._e(),t._v(" "),t.isWeb?t._e():a("el-table-column",{attrs:{label:"name",prop:"name",align:"center","show-overflow-tooltip":"",sortable:""}}),t._v(" "),t.isWeb?t._e():a("el-table-column",{attrs:{label:"系统版本",prop:"systemVersion",align:"center","show-overflow-tooltip":"",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"开始时间",prop:"startTime",align:"center","show-overflow-tooltip":"",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"结束时间",prop:"endTime",align:"center","show-overflow-tooltip":"",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"执行用例数",prop:"testcaseTotal",align:"center","show-overflow-tooltip":"",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"通过",prop:"passTestcaseCount",align:"center","show-overflow-tooltip":"",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"失败",prop:"failTestcaseCount",align:"center","show-overflow-tooltip":"",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"跳过",prop:"skipTestcaseCount",align:"center","show-overflow-tooltip":"",sortable:""}})],1)],1),t._v(" "),a("el-card",{staticStyle:{"margin-top":"10px"}},[a("span",{staticStyle:{"font-weight":"900"},attrs:{slot:"header"},slot:"header"},[t._v("详细信息")]),t._v(" "),a("el-tabs",t._l(t.deviceTestTaskList,(function(e){return a("el-tab-pane",{key:e.id},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n          "+t._s(e.deviceId)+"\n        ")]),t._v(" "),a("test-case",{attrs:{data:e.testcases}})],1)})),1)],1)],1)},o=[],n=(a("7f7f"),a("55dd"),a("ac6a"),a("ca50")),s=a("90c2"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{attrs:{data:t.data,border:""}},[a("el-table-column",{attrs:{label:"执行结果",prop:"status",align:"center",width:"120",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("el-tag",{attrs:{type:0===l.status?"danger":1===l.status?"success":"warning",size:"small"}},[t._v("\n          "+t._s(0===l.status?"失败":1===l.status?"成功":"跳过")+"\n        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"测试用例",prop:"name",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"开始时间",prop:"startTime",align:"center","show-overflow-tooltip":"",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"结束时间",prop:"endTime",align:"center","show-overflow-tooltip":"",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"耗时",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n        "+t._s(parseInt(new Date(a.endTime)-new Date(a.startTime))/1e3+" 秒")+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return t.clickDetailInfo(l)}}},[t._v("\n          详细信息\n        ")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return t.$router.push({name:"UpdateTestcaseAction",params:{actionId:l.id}})}}},[t._v("\n          编辑用例\n        ")]),t._v(" "),l.logUrl?a("el-button",{attrs:{size:"small",type:"text"}},[a("a",{attrs:{href:l.logUrl,target:"_blank"}},[t._v("日志")])]):t._e()]}}])})],1),t._v(" "),a("el-drawer",{attrs:{size:"1300px",title:t.testcase.name,visible:t.showDrawer},on:{"update:visible":function(e){t.showDrawer=e}}},[a("div",{staticStyle:{padding:"5px"}},[a("el-row",[t.testcase.videoUrl?a("el-col",{attrs:{span:6}},[a("video",{attrs:{src:t.testcase.videoUrl,width:"100%",controls:"controls"}},[t._v("浏览器不支持video标签")])]):t._e(),t._v(" "),a("el-col",{attrs:{span:t.testcase.videoUrl?18:24}},[a("el-table",{attrs:{data:t.testcase.steps,border:"","max-height":"500px"}},[a("el-table-column",{attrs:{prop:"number",label:"步骤",align:"center",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"步骤名",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间",align:"center",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间",align:"center",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"耗时",align:"center",width:"180","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n                "+t._s(a.endTime?parseInt(new Date(a.endTime)-new Date(a.startTime))/1e3+"秒":"-")+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("el-tag",{staticStyle:{width:"65px"},attrs:{type:l.endTime?"success":l.startTime?"danger":"info"}},[t._v("\n                  "+t._s(l.endTime?"完成":l.startTime?"失败":"未执行")+"\n                ")])]}}])})],1)],1)],1),t._v(" "),a("el-row",[t.testcase.failImgUrl?a("el-col",{attrs:{span:6}},[a("el-image",{attrs:{src:t.testcase.failImgUrl,"preview-src-list":[t.testcase.failImgUrl],width:"100%"}})],1):t._e(),t._v(" "),t.testcase.failInfo?a("el-col",{attrs:{span:18}},[a("codemirror",{attrs:{options:t.cmOptions},model:{value:t.testcase.failInfo,callback:function(e){t.$set(t.testcase,"failInfo",e)},expression:"testcase.failInfo"}})],1):t._e()],1)],1)])],1)},i=[],c=(a("4ba6"),a("8c2e"),{props:{data:Array},data:function(){return{showDrawer:!1,cmOptions:{mode:"clike",theme:"base16-dark",lineNumbers:!0,readOnly:!0},testcase:{}}},methods:{clickDetailInfo:function(t){this.testcase=t,this.showDrawer=!0}}}),u=c,p=(a("f2cf"),a("2877")),d=Object(p["a"])(u,r,i,!1,null,null,null),f=d.exports,m=a("cf45"),v=a("2ef0"),b=a.n(v),w={name:"TestTaskReport",components:{TestCase:f},computed:{isWeb:function(){return 3===this.$store.state.project.platform}},data:function(){return{platforms:m["c"],testTaskId:this.$route.params.testTaskId,deviceTestTaskList:[],testTaskSummary:[],deviceTestTaskSummary:[]}},created:function(){var t=this;Object(n["b"])({testTaskId:this.testTaskId}).then((function(e){var a=e.data;a.forEach((function(t){t.testcases.sort((function(t,e){return new Date(t.startTime).getTime()-new Date(e.startTime).getTime()}))})),t.deviceTestTaskList=a,t.deviceTestTaskSummary=a.map((function(e){var a=b.a.groupBy(e.testcases,"status"),l={deviceId:e.deviceId,startTime:e.startTime,endTime:e.endTime,testcaseTotal:e.testcases.length,passTestcaseCount:a[1]?a[1].length:0,failTestcaseCount:a[0]?a[0].length:0,skipTestcaseCount:a[2]?a[2].length:0};return t.isWeb?(l.type=e.device.type,l.version=e.device.version,l.platform=e.device.platform):(l.name=e.device.name,l.systemVersion=e.device.systemVersion),l}))})),Object(s["d"])(this.testTaskId).then((function(e){t.testTaskSummary.push(e.data)}))}},h=w,_=Object(p["a"])(h,l,o,!1,null,null,null);e["default"]=_.exports},"55dd":function(t,e,a){"use strict";var l=a("5ca1"),o=a("d8e8"),n=a("4bf8"),s=a("79e5"),r=[].sort,i=[1,2,3];l(l.P+l.F*(s((function(){i.sort(void 0)}))||!s((function(){i.sort(null)}))||!a("2f21")(r)),"Array",{sort:function(t){return void 0===t?r.call(n(this)):r.call(n(this),o(t))}})},"90c2":function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"d",(function(){return r}));var l=a("b775");function o(t){return Object(l["a"])({method:"get",url:"/testTask/commit",params:t})}function n(t){return Object(l["a"])({method:"delete",url:"/testTask/".concat(t)})}function s(t){return Object(l["a"])({method:"post",url:"/testTask/list",params:t})}function r(t){return Object(l["a"])({method:"get",url:"/testTask/".concat(t,"/summary")})}},ca50:function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return n}));var l=a("b775");function o(t){return Object(l["a"])({method:"post",url:"/deviceTestTask/list",params:t})}function n(t){return Object(l["a"])({method:"delete",url:"/deviceTestTask/".concat(t)})}},cf45:function(t,e,a){"use strict";a.d(e,"c",(function(){return l})),a.d(e,"d",(function(){return o})),a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return r}));a("456d"),a("ac6a");var l=[{type:1,name:"Android"},{type:2,name:"iOS"},{type:3,name:"PC Web"}],o=[{state:0,name:"禁用"},{state:1,name:"草稿"},{state:2,name:"发布"}];function n(t){if(!t)return t;var e=t.indexOf("<"),a=t.indexOf(">");if(-1!==e&&-1!==a){var l=t.substring(0,e),o=t.substring(e+1,a);return s(l)+t[e]+s(o)+t[a]}return s(t)}function s(t){return t?t.substring(t.lastIndexOf(".")+1):t}function r(t,e){Object.keys(e).forEach((function(a){void 0!==t[a]&&(t[a]=e[a])}))}},f2cf:function(t,e,a){"use strict";a("074e")}}]);